create table public.country
(
    id           bigint default nextval('country_id_seq'::regclass) not null
        primary key,
    country_name varchar(255)                                       not null
);

alter table public.country
    owner to postgres;

create table public.cities
(
    country_name_id bigint
        constraint fkeskbfpc130i7t4xakwrjghswf
            references public.country,
    id              bigint default nextval('cities_id_seq'::regclass) not null
        primary key,
    cities_name     varchar(255)                                      not null
);

alter table public.cities
    owner to postgres;

create table public.attractions
(
    city_name_id     bigint
        constraint fkkq9ql9geqfxxd9ex4mwyplwtf
            references public.cities
            on update cascade on delete cascade,
    id               bigint default nextval('attractions_id_seq'::regclass) not null
        primary key,
    attractions_name varchar(40)                                            not null,
    attraction_info  text
);

alter table public.attractions
    owner to postgres;

create table public.users
(
    age         integer
        constraint users_age_check
            check (age <= 120),
    is_married  boolean      default false,
    created     timestamp(6) default now(),
    id          bigint       default nextval('users_id_seq'::regclass) not null
        primary key,
    first_name  varchar(20)                                            not null,
    second_name varchar(255)
);

alter table public.users
    owner to postgres;

create table public.comments
(
    id             bigint default nextval('comments_id_seq'::regclass) not null
        primary key,
    users_id       bigint
        constraint fkt55y2infwbbw3o942o2mhm0v4
            references public.users,
    text           varchar(255)                                        not null,
    attractions_id bigint
        constraint fkd5pr6yxoxb0bdhi8b9sxfkufy
            references public.attractions
            on update cascade on delete cascade
);

alter table public.comments
    owner to postgres;

create table public.l_user_attraction
(
    id             bigint default nextval('cities_id_seq'::regclass) not null
        constraint l_user_attraction_pk
            primary key,
    user_id        bigint
        constraint l_user_attraction_users_id_fk
            references public.users
            on update cascade on delete cascade,
    attractions_id bigint
        constraint l_user_attraction_attractions_id_fk
            references public.attractions
            on update cascade on delete cascade
);

alter table public.l_user_attraction
    owner to postgres;

create table public.security_credentials
(
    id             bigint not null
        primary key,
    users_role     varchar(255)
        constraint security_credentials_users_role_check
            check ((users_role)::text = ANY
                   ((ARRAY ['USER'::character varying, 'MODERATOR'::character varying, 'ADMIN'::character varying])::text[])),
    users_id       bigint
        constraint security_credentials_users_id_fk
            references public.users
            on update cascade on delete cascade,
    users_login    varchar(255),
    users_password varchar(255)
);

alter table public.security_credentials
    owner to postgres;


